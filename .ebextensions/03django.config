files:
  "/etc/httpd/conf.d/wsgihacks.conf":
    mode: "000644"
    owner: root
    group: root
    content: |
      WSGIPassAuthorization on

container_commands:
  migrate:
    command: "django-admin.py migrate --noinput"
    leader_only: true
  createcachetable:
    command: "django-admin.py createcachetable"
    leader_only: true
  clearsessions:
    command: "django-admin.py clearsessions"
    leader_only: true
  collectstatic:
    command: "django-admin.py collectstatic --noinput"

option_settings:
  "aws:elasticbeanstalk:container:python":
    WSGIPath: webapi/wsgi.py
    NumProcesses: 1
    NumThreads: 10
  "aws:elasticbeanstalk:container:python:staticfiles":
    "/api/static/": "static/"